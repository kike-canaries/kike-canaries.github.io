<!DOCTYPE html>
<html>

<head>

  <title>Canair - Ejemplos de mediciones en recorrido</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <link rel="stylesheet" href="../assets/css/main.css" />
  <noscript>
    <link rel="stylesheet" href="../assets/css/noscript.css" /></noscript>
  <link rel="shortcut icon" type="image/x-icon" href="../images/favicon.ico" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.css"
    integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
    crossorigin="" />
  <script src="../assets/js/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.js"
    integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
    crossorigin=""></script>
  <script type="text/javascript" src="../assets/js/maps/Leaflet.Icon.Glyph.js"></script>
  <script src="../assets/js/maps/leaflet-animated-marker.js"></script>
  <script src="../assets/js/maps/first_track.js"></script>
  <style>
    .leaflet-marker-icon.sans-serif {
      font-weight: bold;
      font-family: Sans Serif;
    }

    .info {
      padding: 6px 8px;
      font: 14px/16px Arial, Helvetica, sans-serif;
      background: white;
      background: rgba(255, 255, 255, 0.8);
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
      border-radius: 5px;
      color: #555;
    }

    .info h4 {
      margin: 0 0 5px;
      color: #777;
    }

    .legend {
      text-align: left;
      line-height: 18px;
      color: #555;
    }

    .data {
      width: 260px;
    }

    .info i {
      width: 18px;
      height: 18px;
      float: left;
      margin: 0 8px 0 0;
      opacity: 0.7;
    }

    div.leaflet-control-layers-overlays label div span {
      color:black;
    }

    input.leaflet-control-layers-selector {
      margin-left: 3em;
    }
  </style>
</head>

<body class="is-preload">

  <!-- Header -->
  <header id="header">
    <a href="/index.html" class="title">Canair</a>
    <nav>
      <ul>
        <li><a href="/index.html">Home</a></li>
      </ul>
    </nav>
  </header>

  <!-- Wrapper -->
  <div id="wrapper">

    <!-- Main -->
    <section id="main" class="wrapper">
      <div class="inner">
        <h1 class="major">Algunos tracks compartidos</h1>
        <p>Estas son algunas de las mediciones compartidas por algunos de nuestros
          usuarios que tienen un Android y un dispositivo, los recorridos cortos en bicicleta
          y otros en automóvil. Es nuestro primer intento por proyectar de forma pública
          la información que vamos generando. Si tienes sugerencias, por favor no dudes
          en <a href="/index.html#three">contactarnos</a>. Anímate a contar con tu dispositivo para que
          puedas reportar bien sea con una estación fija o cuando te movilizas por la ciudad.
        </p>
        <ul class="alt">
          <li><b>Fecha</b>: <span id="date">...</span></li>
          <li><b>Medición</b>: <span id="interval">...</span></li>
          <li><b>Archivo</b>: <span><a id="filename" targer="_blank" href="">Ver</a></span></li>
        </ul>

        <form>
          <select id="select_map"></select>
        </form>
        <div class="loader" style="display: none">Trayendo algo para tí, vale la pena...</div>
        <div id="mapid" style="width: 100%; height: 400px;"></div>
        <script>
          var data_references = [
            '20190502185441',
            '20190407191913',
            '20190403124450',
            '20190402112323',
            '20190327153956',
            '20190327141715',
            '20190323085459',
            '20190308180811',
            '20190227192004',
            '20190211183737',
          ];
          $('#select_map').html(function () {
            inner_data = '';
            data_references.forEach(element => {
              inner_data += '<option value="' + element + '">' + element.substr(0, 8) + '</option>'
            });
            return inner_data
          });

          var measurements = L.layerGroup();
          var travel = L.layerGroup();

          var base_layer = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiY2FuYWlyaW8iLCJhIjoiY2p2OXo3Y3VxMHlndjQ0bjMwajE4b2w2ZiJ9.ZfwXi-3Ald0O0AfpVvvm1g', {
            maxZoom: 18,
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
              '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
              'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.streets'
          });
          var mapsample = L.map('mapid', {
            center: [4.60, -74.13],
            zoom: 14,
            layers: [base_layer, travel],
          });

          var info = conventions_map(mapsample);
          $('#select_map').change(function () {
            load_canairio_layer(mapsample, measurements, travel, $(this).val());
          });
          load_canairio_layer(mapsample, measurements, travel, data_references[0]);
          L.control.layers(null, {"Recorrido": measurements, "Animación": travel}).addTo(mapsample);
        </script>
      </div>
    </section>
  </div>

</body>

</html>